<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lattice</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>Lattice</h1>
            </div>
            <nav class="nav">
                <button class="nav-btn active" data-view="dashboard">Dashboard</button>
                <button class="nav-btn" data-view="whales">Whales</button>
                <button class="nav-btn" data-view="benchmarks">Benchmarks</button>
                <button class="nav-btn" data-view="p2p">P2P Exchange</button>
                <button class="nav-btn" data-view="proximity">Proximity</button>
                <button class="nav-btn" data-view="chat">Chat</button>
                <button class="nav-btn" data-view="privacy">Privacy</button>
                <button class="nav-btn" data-view="convert">Convert</button>
                <button class="nav-btn" data-view="analytics">Analytics</button>
                <button class="nav-btn" data-view="settings">Settings</button>
            </nav>
            <div class="health-status" id="healthStatus">
                <span class="status-indicator"></span>
                <span class="status-text">Checking...</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboard" class="view active">
                <div class="welcome-section">
                    <h2>Welcome to Lattice</h2>
                    <p>Monitor whale accounts and get AI-powered trading recommendations</p>
                </div>

                <!-- Wallet Connection -->
                <div class="card">
                    <h3>Connect Your Wallet</h3>
                    <div class="wallet-input-group">
                        <input 
                            type="text" 
                            id="walletAddress" 
                            placeholder="Enter Solana wallet address"
                            class="input-field"
                        >
                        <button id="connectWallet" class="btn btn-primary">Connect Wallet</button>
                    </div>
                    <div id="walletError" class="error-message"></div>
                </div>

                <!-- Portfolio Overview -->
                <div id="portfolioSection" class="card hidden">
                    <div class="card-header">
                        <h3>Your Portfolio</h3>
                        <div class="blockchain-filters">
                            <button class="filter-btn active" data-chain="all">All Chains</button>
                            <button class="filter-btn" data-chain="solana">Solana</button>
                            <button class="filter-btn" data-chain="ethereum">Ethereum</button>
                            <button class="filter-btn" data-chain="bsc">BSC</button>
                            <button class="filter-btn" data-chain="polygon">Polygon</button>
                        </div>
                    </div>
                    <div class="portfolio-stats">
                        <div class="stat-card">
                            <div class="stat-label">Total Value</div>
                            <div class="stat-value" id="totalValue">$0.00</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Assets</div>
                            <div class="stat-value" id="assetCount">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Blockchains</div>
                            <div class="stat-value" id="blockchainCount">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Tracked Whales</div>
                            <div class="stat-value" id="whaleCount">0</div>
                        </div>
                    </div>
                    <div id="assetsList" class="assets-list"></div>
                </div>

                <!-- Recent Activity -->
                <div id="activitySection" class="card hidden">
                    <h3>Recent Whale Activity</h3>
                    <div id="activityList" class="activity-list">
                        <p class="empty-state">No recent activity</p>
                    </div>
                </div>

                <!-- Recent AI Actions -->
                <div id="aiActionsSection" class="card hidden">
                    <h3>Recent AI Actions</h3>
                    <div id="aiActionsList" class="ai-actions-list">
                        <p class="empty-state">No recent AI actions</p>
                    </div>
                </div>

                <!-- Position Distribution -->
                <div id="distributionSection" class="card hidden">
                    <h3>Position Distribution</h3>
                    <div class="distribution-container">
                        <div class="distribution-chart">
                            <canvas id="blockchainChart"></canvas>
                        </div>
                        <div class="distribution-chart">
                            <canvas id="assetTypeChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- P2P Exchange View -->
            <div id="p2p" class="view">
                <div class="view-header">
                    <h2>P2P Exchange</h2>
                    <button id="createOfferBtn" class="btn btn-primary">Create Offer</button>
                </div>

                <!-- Create Offer Form -->
                <div id="offerForm" class="card hidden">
                    <h3>Create P2P Offer</h3>
                    <div class="form-group">
                        <label for="offerType">Offer Type</label>
                        <select id="offerType" class="input-field">
                            <option value="sell">Sell</option>
                            <option value="buy">Buy</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="offerFromAsset">From Asset</label>
                        <select id="offerFromAsset" class="input-field">
                            <option value="SOL">SOL</option>
                            <option value="ETH">ETH</option>
                            <option value="BTC">BTC</option>
                            <option value="USDC">USDC</option>
                            <option value="USDT">USDT</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="offerToAsset">To Asset</label>
                        <select id="offerToAsset" class="input-field">
                            <option value="USDC">USDC</option>
                            <option value="SOL">SOL</option>
                            <option value="ETH">ETH</option>
                            <option value="BTC">BTC</option>
                            <option value="USDT">USDT</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="offerFromAmount">From Amount</label>
                        <input type="number" id="offerFromAmount" class="input-field" placeholder="0.00" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label for="offerToAmount">To Amount</label>
                        <input type="number" id="offerToAmount" class="input-field" placeholder="0.00" step="0.01" min="0">
                    </div>
                    <div class="form-actions">
                        <button id="saveOfferBtn" class="btn btn-primary">Create Offer</button>
                        <button id="cancelOfferBtn" class="btn btn-secondary">Cancel</button>
                    </div>
                    <div id="offerFormError" class="error-message"></div>
                </div>

                <!-- My Offers -->
                <div class="card">
                    <div class="card-header">
                        <h3>My Offers</h3>
                        <button id="refreshMyOffers" class="btn btn-secondary btn-sm">Refresh</button>
                    </div>
                    <div id="myOffersList" class="offers-list">
                        <p class="empty-state">No active offers</p>
                    </div>
                </div>

                <!-- Marketplace -->
                <div class="card">
                    <div class="card-header">
                        <h3>Marketplace</h3>
                        <button id="refreshMarketplace" class="btn btn-secondary btn-sm">Refresh</button>
                    </div>
                    <div id="marketplaceList" class="offers-list">
                        <p class="empty-state">No offers available</p>
                    </div>
                </div>
            </div>

            <!-- Proximity View -->
            <div id="proximity" class="view">
                <div class="view-header">
                    <h2>Proximity Transfers</h2>
                    <p class="view-subtitle">Send crypto to nearby users without entering wallet addresses</p>
                </div>

                <!-- Discovery Toggle Component (Task 23.1) -->
                <div class="card">
                    <div class="card-header">
                        <h3>Discovery</h3>
                        <div class="discovery-status" id="discoveryStatus">
                            <span class="status-indicator"></span>
                            <span class="status-text">Not Discoverable</span>
                        </div>
                    </div>
                    <p class="card-description">Enable discovery to find nearby users on the same WiFi or Bluetooth network</p>
                    
                    <div class="discovery-controls">
                        <div class="discovery-method-selector">
                            <label class="method-option">
                                <input type="radio" name="discoveryMethod" value="WiFi" checked>
                                <span class="method-label">
                                    <span class="method-icon">ðŸ“¶</span>
                                    <span>WiFi</span>
                                </span>
                            </label>
                            <label class="method-option">
                                <input type="radio" name="discoveryMethod" value="Bluetooth">
                                <span class="method-label">
                                    <span class="method-icon">ðŸ“¡</span>
                                    <span>Bluetooth</span>
                                </span>
                            </label>
                        </div>
                        
                        <button id="toggleDiscoveryBtn" class="btn btn-primary">Enable Discovery</button>
                    </div>

                    <div id="activeSessionInfo" class="active-session-info hidden">
                        <div class="session-detail">
                            <span class="session-label">Session Duration:</span>
                            <span class="session-value" id="sessionDuration">--</span>
                        </div>
                        <div class="session-detail">
                            <span class="session-label">Expires In:</span>
                            <span class="session-value" id="sessionExpiry">--</span>
                        </div>
                        <button id="extendSessionBtn" class="btn btn-secondary btn-sm">Extend +15 min</button>
                    </div>
                </div>

                <!-- Discovered Peers List Component (Task 23.2) -->
                <div class="card">
                    <div class="card-header">
                        <h3>Nearby Users</h3>
                        <button id="refreshPeersBtn" class="btn btn-secondary btn-sm">Refresh</button>
                    </div>
                    <div id="discoveredPeersList" class="discovered-peers-list">
                        <p class="empty-state">Enable discovery to find nearby users</p>
                    </div>
                </div>

                <!-- Transfer Request Component (Task 23.3) -->
                <div id="transferRequestForm" class="card hidden">
                    <div class="card-header">
                        <h3>Send Transfer</h3>
                        <button id="closeTransferFormBtn" class="btn-icon">âœ•</button>
                    </div>
                    
                    <div class="selected-peer-info" id="selectedPeerInfo">
                        <!-- Populated dynamically -->
                    </div>

                    <div class="form-group">
                        <label for="transferAsset">Asset</label>
                        <select id="transferAsset" class="input-field">
                            <option value="">Select asset</option>
                            <option value="SOL">SOL - Solana</option>
                            <option value="USDC">USDC - USD Coin</option>
                            <option value="USDT">USDT - Tether</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="transferAmount">Amount</label>
                        <input type="number" id="transferAmount" class="input-field" placeholder="0.00" step="0.000001" min="0">
                        <div class="balance-display" id="transferBalance">Available: --</div>
                    </div>

                    <div class="transfer-fees-preview" id="transferFeesPreview">
                        <div class="fee-row">
                            <span class="fee-label">Network Fee:</span>
                            <span class="fee-value" id="networkFeeEstimate">--</span>
                        </div>
                        <div class="fee-row total">
                            <span class="fee-label">Total to Send:</span>
                            <span class="fee-value" id="totalToSend">--</span>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button id="confirmTransferBtn" class="btn btn-primary" disabled>Confirm Transfer</button>
                        <button id="cancelTransferBtn" class="btn btn-secondary">Cancel</button>
                    </div>
                    <div id="transferFormError" class="error-message"></div>
                </div>

                <!-- Transfer Notification Component (Task 23.4) -->
                <div id="incomingTransferNotification" class="card notification-card hidden">
                    <div class="notification-header">
                        <h3>Incoming Transfer Request</h3>
                        <span class="notification-badge">New</span>
                    </div>
                    
                    <div class="transfer-notification-content" id="transferNotificationContent">
                        <!-- Populated dynamically -->
                    </div>

                    <div class="notification-actions">
                        <button id="acceptTransferBtn" class="btn btn-primary">Accept</button>
                        <button id="rejectTransferBtn" class="btn btn-secondary">Reject</button>
                    </div>
                    <div class="notification-timer" id="notificationTimer">Expires in --</div>
                </div>

                <!-- Transfer History Component (Task 23.5) -->
                <div class="card">
                    <div class="card-header">
                        <h3>Transfer History</h3>
                        <button id="refreshHistoryBtn" class="btn btn-secondary btn-sm">Refresh</button>
                    </div>

                    <div class="history-filters">
                        <div class="filter-group">
                            <label for="historyDateFilter">Date Range</label>
                            <select id="historyDateFilter" class="input-field">
                                <option value="all">All Time</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="historyAssetFilter">Asset</label>
                            <select id="historyAssetFilter" class="input-field">
                                <option value="all">All Assets</option>
                                <option value="SOL">SOL</option>
                                <option value="USDC">USDC</option>
                                <option value="USDT">USDT</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label for="historyTypeFilter">Type</label>
                            <select id="historyTypeFilter" class="input-field">
                                <option value="all">All Types</option>
                                <option value="direct">Direct Transfer</option>
                                <option value="p2p">P2P Exchange</option>
                            </select>
                        </div>
                    </div>

                    <div id="proximityHistoryList" class="proximity-history-list">
                        <p class="empty-state">No transfer history</p>
                    </div>
                </div>
            </div>

            <!-- Chat View -->
            <div id="chat" class="view">
                <div class="view-header">
                    <h2>Peer-to-Peer Chat</h2>
                </div>

                <div class="card">
                    <div class="chat-container">
                        <div class="chat-sidebar">
                            <h3>Contacts</h3>
                            <div id="contactsList" class="contacts-list">
                                <p class="empty-state">No contacts</p>
                            </div>
                        </div>
                        <div class="chat-main">
                            <div id="chatMessages" class="chat-messages">
                                <p class="empty-state">Select a contact to start chatting</p>
                            </div>
                            <div class="chat-input-container">
                                <input type="text" id="chatInput" class="input-field" placeholder="Type a message..." disabled>
                                <button id="sendMessageBtn" class="btn btn-primary" disabled>Send</button>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="verifyOnChain">
                                    <span>Verify on-chain</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Privacy View -->
            <div id="privacy" class="view">
                <div class="view-header">
                    <h2>Privacy & Wallet Management</h2>
                </div>

                <!-- User Tag Management -->
                <div class="card">
                    <h3>User Tag</h3>
                    <p class="card-description">Your anonymous identifier for public interactions</p>
                    <div class="user-tag-section">
                        <div class="current-tag">
                            <span class="tag-label">Current Tag:</span>
                            <span class="tag-value" id="currentUserTag">Trader_XXXXXX</span>
                        </div>
                        <div class="form-group">
                            <label for="newUserTag">New User Tag</label>
                            <input type="text" id="newUserTag" class="input-field" placeholder="Enter new tag" maxlength="20">
                        </div>
                        <button id="updateUserTagBtn" class="btn btn-primary">Update Tag</button>
                        <div id="userTagError" class="error-message"></div>
                    </div>
                </div>

                <!-- Temporary Wallets -->
                <div class="card">
                    <div class="card-header">
                        <h3>Temporary Wallets</h3>
                        <button id="createTempWalletBtn" class="btn btn-primary">Create Temporary Wallet</button>
                    </div>
                    <p class="card-description">Create temporary wallets with custom tags for compartmentalized trading (max 10). The active wallet is used for all exchanges, conversions, and P2P transfers.</p>
                    
                    <!-- Active Wallet Info -->
                    <div id="activeWalletInfo" class="active-wallet-info hidden">
                        <div class="info-banner">
                            <strong>ðŸ”‘ Active Wallet:</strong> <span id="activeWalletName">None</span>
                            <span class="info-text">This wallet will be used for all trading operations</span>
                        </div>
                    </div>
                    
                    <!-- Create Temp Wallet Form -->
                    <div id="tempWalletForm" class="form-section hidden">
                        <div class="form-group">
                            <label for="tempWalletTag">Wallet Tag</label>
                            <input type="text" id="tempWalletTag" class="input-field" placeholder="e.g., Trading_Bot_1" maxlength="30">
                        </div>
                        <div class="form-group">
                            <label for="tempWalletBlockchain">Blockchain</label>
                            <select id="tempWalletBlockchain" class="input-field">
                                <option value="solana">Solana</option>
                                <option value="ethereum">Ethereum</option>
                                <option value="bsc">BSC</option>
                                <option value="polygon">Polygon</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tempWalletExpiry">Expiration (optional)</label>
                            <input type="datetime-local" id="tempWalletExpiry" class="input-field">
                        </div>
                        <div class="form-actions">
                            <button id="saveTempWalletBtn" class="btn btn-primary">Create Wallet</button>
                            <button id="cancelTempWalletBtn" class="btn btn-secondary">Cancel</button>
                        </div>
                        <div id="tempWalletError" class="error-message"></div>
                    </div>

                    <!-- Temporary Wallets List -->
                    <div id="tempWalletsList" class="temp-wallets-list">
                        <p class="empty-state">No temporary wallets</p>
                    </div>
                </div>

                <!-- Wallet Freeze Management -->
                <div class="card">
                    <h3>Wallet Freeze Control</h3>
                    <p class="card-description">Freeze wallets to prevent outgoing transactions in case of security concerns</p>
                    <div id="walletFreezeList" class="wallet-freeze-list">
                        <p class="empty-state">Connect your wallet to manage freeze settings</p>
                    </div>
                </div>
            </div>

            <!-- Convert View -->
            <div id="convert" class="view">
                <div class="view-header">
                    <h2>Convert Assets</h2>
                </div>

                <!-- Conversion Interface -->
                <div class="card conversion-card">
                    <div class="conversion-container">
                        <!-- From Asset -->
                        <div class="conversion-section">
                            <label class="conversion-label">From</label>
                            <div class="asset-input-group">
                                <select id="fromAsset" class="asset-select">
                                    <option value="">Select asset</option>
                                    <option value="SOL">SOL - Solana</option>
                                    <option value="ETH">ETH - Ethereum</option>
                                    <option value="BTC">BTC - Bitcoin</option>
                                    <option value="USDC">USDC - USD Coin</option>
                                    <option value="USDT">USDT - Tether</option>
                                    <option value="BNB">BNB - Binance Coin</option>
                                    <option value="MATIC">MATIC - Polygon</option>
                                </select>
                                <input 
                                    type="number" 
                                    id="fromAmount" 
                                    class="amount-input" 
                                    placeholder="0.00"
                                    step="0.000001"
                                    min="0"
                                >
                            </div>
                            <div class="balance-display" id="fromBalance">Balance: --</div>
                        </div>

                        <!-- Swap Button -->
                        <div class="swap-button-container">
                            <button id="swapAssets" class="swap-button" title="Swap assets">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M7 16V4M7 4L3 8M7 4L11 8M17 8V20M17 20L21 16M17 20L13 16"/>
                                </svg>
                            </button>
                        </div>

                        <!-- To Asset -->
                        <div class="conversion-section">
                            <label class="conversion-label">To</label>
                            <div class="asset-input-group">
                                <select id="toAsset" class="asset-select">
                                    <option value="">Select asset</option>
                                    <option value="SOL">SOL - Solana</option>
                                    <option value="ETH">ETH - Ethereum</option>
                                    <option value="BTC">BTC - Bitcoin</option>
                                    <option value="USDC">USDC - USD Coin</option>
                                    <option value="USDT">USDT - Tether</option>
                                    <option value="BNB">BNB - Binance Coin</option>
                                    <option value="MATIC">MATIC - Polygon</option>
                                </select>
                                <input 
                                    type="number" 
                                    id="toAmount" 
                                    class="amount-input" 
                                    placeholder="0.00"
                                    step="0.000001"
                                    min="0"
                                    readonly
                                >
                            </div>
                            <div class="balance-display" id="toBalance">Balance: --</div>
                        </div>

                        <!-- Mode Toggle -->
                        <div class="mode-toggle">
                            <button id="exactInputMode" class="mode-btn active">Exact Input</button>
                            <button id="exactOutputMode" class="mode-btn">Exact Output</button>
                        </div>

                        <!-- Quote Details -->
                        <div id="quoteDetails" class="quote-details hidden">
                            <div class="quote-row">
                                <span class="quote-label">Exchange Rate</span>
                                <span class="quote-value" id="exchangeRate">--</span>
                            </div>
                            <div class="quote-row">
                                <span class="quote-label">Network Fee</span>
                                <span class="quote-value" id="networkFee">--</span>
                            </div>
                            <div class="quote-row">
                                <span class="quote-label">Platform Fee</span>
                                <span class="quote-value" id="platformFee">--</span>
                            </div>
                            <div class="quote-row">
                                <span class="quote-label">Provider Fee</span>
                                <span class="quote-value" id="providerFee">--</span>
                            </div>
                            <div class="quote-row total">
                                <span class="quote-label">Total Fees</span>
                                <span class="quote-value" id="totalFees">--</span>
                            </div>
                            <div class="quote-row highlight">
                                <span class="quote-label">You will receive</span>
                                <span class="quote-value" id="finalAmount">--</span>
                            </div>
                            <div class="quote-expiry" id="quoteExpiry">Quote expires in --</div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="conversion-actions">
                            <button id="getQuoteBtn" class="btn btn-secondary" disabled>
                                Get Quote
                            </button>
                            <button id="executeConversionBtn" class="btn btn-primary hidden" disabled>
                                Convert
                            </button>
                        </div>

                        <div id="conversionError" class="error-message"></div>
                    </div>
                </div>

                <!-- Conversion History -->
                <div class="card">
                    <div class="card-header">
                        <h3>Conversion History</h3>
                        <button id="refreshHistory" class="btn btn-secondary btn-sm">Refresh</button>
                    </div>
                    <div id="conversionHistory" class="conversion-history">
                        <p class="empty-state">No conversion history</p>
                    </div>
                </div>
            </div>

            <!-- Whales View -->
            <div id="whales" class="view">
                <div class="view-header">
                    <h2>Tracked Whales</h2>
                    <button id="refreshWhales" class="btn btn-secondary">Refresh</button>
                </div>
                <div id="whalesList" class="whales-grid">
                    <p class="empty-state">Connect your wallet to see tracked whales</p>
                </div>
            </div>

            <!-- Benchmarks View -->
            <div id="benchmarks" class="view">
                <div class="view-header">
                    <h2>Price Benchmarks</h2>
                    <button id="createBenchmarkBtn" class="btn btn-primary">Create Benchmark</button>
                </div>

                <!-- Create/Edit Benchmark Form -->
                <div id="benchmarkForm" class="card hidden">
                    <h3 id="benchmarkFormTitle">Create Benchmark</h3>
                    <div class="form-group">
                        <label for="benchmarkAsset">Asset</label>
                        <select id="benchmarkAsset" class="input-field">
                            <option value="">Select asset</option>
                            <option value="SOL">SOL - Solana</option>
                            <option value="ETH">ETH - Ethereum</option>
                            <option value="BTC">BTC - Bitcoin</option>
                            <option value="USDC">USDC - USD Coin</option>
                            <option value="USDT">USDT - Tether</option>
                            <option value="BNB">BNB - Binance Coin</option>
                            <option value="MATIC">MATIC - Polygon</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="benchmarkBlockchain">Blockchain</label>
                        <select id="benchmarkBlockchain" class="input-field">
                            <option value="solana">Solana</option>
                            <option value="ethereum">Ethereum</option>
                            <option value="bsc">BSC</option>
                            <option value="polygon">Polygon</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="benchmarkPrice">Target Price ($)</label>
                        <input type="number" id="benchmarkPrice" class="input-field" placeholder="0.00" step="0.01" min="0">
                    </div>
                    <div class="form-group">
                        <label for="benchmarkTrigger">Trigger Type</label>
                        <select id="benchmarkTrigger" class="input-field">
                            <option value="ABOVE">Price Above</option>
                            <option value="BELOW">Price Below</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="benchmarkAction">Action</label>
                        <select id="benchmarkAction" class="input-field">
                            <option value="ALERT">Alert Only</option>
                            <option value="EXECUTE">Execute Trade</option>
                        </select>
                    </div>
                    <div id="tradeAmountGroup" class="form-group hidden">
                        <label for="benchmarkTradeAmount">Trade Amount</label>
                        <input type="number" id="benchmarkTradeAmount" class="input-field" placeholder="0.00" step="0.01" min="0">
                    </div>
                    <div id="tradeActionGroup" class="form-group hidden">
                        <label for="benchmarkTradeAction">Trade Action</label>
                        <select id="benchmarkTradeAction" class="input-field">
                            <option value="BUY">Buy</option>
                            <option value="SELL">Sell</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button id="saveBenchmarkBtn" class="btn btn-primary">Save Benchmark</button>
                        <button id="cancelBenchmarkBtn" class="btn btn-secondary">Cancel</button>
                    </div>
                    <div id="benchmarkFormError" class="error-message"></div>
                </div>

                <!-- Active Benchmarks -->
                <div class="card">
                    <div class="card-header">
                        <h3>Active Benchmarks</h3>
                        <button id="refreshBenchmarks" class="btn btn-secondary btn-sm">Refresh</button>
                    </div>
                    <div id="benchmarksList" class="benchmarks-list">
                        <p class="empty-state">No active benchmarks</p>
                    </div>
                </div>
            </div>

            <!-- Analytics View -->
            <div id="analytics" class="view">
                <div class="view-header">
                    <h2>Analytics</h2>
                    <div class="period-selector">
                        <button class="period-btn active" data-period="24h">24h</button>
                        <button class="period-btn" data-period="7d">7d</button>
                        <button class="period-btn" data-period="30d">30d</button>
                    </div>
                </div>

                <!-- Portfolio Performance -->
                <div class="card">
                    <h3>Portfolio Performance</h3>
                    <div id="performanceChart" class="chart-container">
                        <p class="empty-state">Connect your wallet to see performance data</p>
                    </div>
                </div>

                <!-- Whale Impact -->
                <div class="card">
                    <h3>Whale Impact Analysis</h3>
                    <div id="whaleImpact" class="impact-container">
                        <p class="empty-state">No whale impact data available</p>
                    </div>
                </div>

                <!-- Recommendation Accuracy -->
                <div class="card">
                    <h3>AI Recommendation Accuracy</h3>
                    <div id="recommendationAccuracy" class="accuracy-container">
                        <p class="empty-state">No recommendation data available</p>
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings" class="view">
                <h2>Settings</h2>
                
                <div class="card">
                    <h3>API Configuration</h3>
                    <div class="form-group">
                        <label for="apiUrl">API Base URL</label>
                        <input 
                            type="text" 
                            id="apiUrl" 
                            class="input-field"
                            value="http://localhost:3000"
                        >
                    </div>
                    <button id="saveSettings" class="btn btn-primary">Save Settings</button>
                </div>

                <div class="card">
                    <h3>Agentic Trimming</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        Automatically trim profitable positions to lock in gains when targets are reached.
                    </p>
                    
                    <div class="form-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="trimEnabled" class="toggle-input">
                            <span class="toggle-slider"></span>
                            <span class="toggle-text">Enable Agentic Trimming</span>
                        </label>
                    </div>

                    <div id="trimConfigSection" class="hidden" style="margin-top: 1.5rem;">
                        <div class="form-group">
                            <label for="minProfitPercent">Minimum Profit % to Trim</label>
                            <input 
                                type="number" 
                                id="minProfitPercent" 
                                class="input-field"
                                min="0"
                                max="100"
                                step="1"
                                value="20"
                            >
                            <small style="color: var(--text-secondary);">Only trim positions with at least this profit percentage</small>
                        </div>

                        <div class="form-group">
                            <label for="trimPercent">Trim Percentage</label>
                            <input 
                                type="number" 
                                id="trimPercent" 
                                class="input-field"
                                min="1"
                                max="100"
                                step="1"
                                value="25"
                            >
                            <small style="color: var(--text-secondary);">Percentage of position to trim when target is reached</small>
                        </div>

                        <div class="form-group">
                            <label for="maxTrimsPerDay">Max Trims Per Day</label>
                            <input 
                                type="number" 
                                id="maxTrimsPerDay" 
                                class="input-field"
                                min="1"
                                max="20"
                                step="1"
                                value="3"
                            >
                            <small style="color: var(--text-secondary);">Maximum number of automatic trims per day</small>
                        </div>

                        <button id="saveTrimConfig" class="btn btn-primary">Save Trim Configuration</button>
                    </div>

                    <div id="trimConfigError" class="error-message"></div>
                </div>

                <div class="card">
                    <h3>About</h3>
                    <p>Lattice v1.0.0</p>
                    <p>Monitor whale accounts and receive AI-powered trading recommendations.</p>
                </div>
            </div>
        </main>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay hidden">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <script src="app.js"></script>
    <script src="proximity.js"></script>
</body>
</html>
